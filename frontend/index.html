<!DOCTYPE html>
<html lang="zh">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="index_css.css">
    <title>CUIT冒险家协会</title>
    <style>

    </style>
</head>
<header class="header">
    <nav class="navbar">
        <div class="A"><li><a href="">首页</a></li></div>
        <div class="page">
            <li><a href="navigation/plan.html">计划</a></li>
            <li><a href="navigation/classtable.html">课表</a></li>
        </div>
        <div class="log_register">
            <li><span id="welcome-message"></span></li> <!-- 显示欢迎信息 -->
            <li><a href="./navigation/log.html" id="auth-link" class="user-account__link">登录</a></li>
            <li><a href="./navigation/register.html" id="register-link">注册</a></li>
        </div>
        
    </nav>
</header>
<body>
    <!-- 网站标题 -->
    <h1 class="title">CUIT冒险家协会</h1>

    <div class="container">
        <!-- 跳蚤网 -->
        <div class="section">
            <h2>跳蚤网</h2>
            <p>在这里买卖二手物品，找到你需要的宝贝。</p>
            <a href="./TiaoZao/TZ_index.html">进入跳蚤网</a>
        </div>

        <div class="section">
            <h2>任务榜</h2>
            <p>发布任务，接取任务</p>
            <a href="./error.html">发布任务</a>
        </div>

        <div class="section">
            <h2>拍卖行</h2>
            <p>价高者得</p>
            <a href="./error.html">进入竞拍</a>
        </div>

        <!-- 恋爱网 -->
        <div class="section">
            <h2>谈恋爱吧</h2>
            <p>说不定就谈上了捏</p>
            <a href="./error.html">进入恋爱网</a>
        </div>

        <!-- 话痨网 -->
        <div class="section">
            <h2>今日话题吧</h2>
            <p>聊点有意思的吧</p>
            <a href="./error.html">进入今日话题吧</a>
        </div>

        <!-- 找搭子网 -->
        <div class="section">
            <h2>找搭子网</h2>
            <p>寻找志同道合的小伙伴，一起吃饭、运动、游戏。</p>
            <a href="./error.html">进入找搭子</a>
        </div>
        
        <div class="section">
            <h2>学习资料吧</h2>
            <p>看看有没有你想要的吧</p>
            <a href="./error.html">学习资料吧</a>
        </div>

    </div>
</body>
<script>

    // 获取商品数据并渲染到页面
    // 在页面加载时检查用户登录状态
    document.addEventListener('DOMContentLoaded', function() {
        const storedUserInfo = localStorage.getItem('userInfo');
        const authLink = document.getElementById('auth-link');
        const registerlink = document.getElementById('register-link');
        const welcomeMessage = document.getElementById('welcome-message');

        if (storedUserInfo) {
            const userInfo = JSON.parse(storedUserInfo);
            welcomeMessage.textContent = `你好, ${userInfo.name}`; // 显示欢迎信息
            authLink.textContent = '注销'; // 改变链接文本为“注销”
            registerlink.style.display='none';
            // 注销功能
            authLink.addEventListener('click', function(event) {
                event.preventDefault();
                localStorage.removeItem('userInfo'); // 清除用户信息
                authLink.textContent = '登录'; // 改变链接文本为“登录”
                welcomeMessage.textContent = ''; // 清除欢迎信息
                registerlink.style.display = 'inline'; // 恢复注册链接显示
            });
        } else {
            authLink.textContent = '登录'; // 默认显示“登录”
            authLink.addEventListener('click', function(event) {
                event.preventDefault();
                window.location.href = './navigation/log.html'; // 导航到登录页面
            });
        }
    });
</script>
</html>
